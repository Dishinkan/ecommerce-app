<!-- app/templates/auth.html -->
 
<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <title>Accedi o Registrati</title>
  <style>
    body { font-family: system-ui, sans-serif; margin: 24px; display: flex; justify-content: center; }
    .container { max-width: 400px; width: 100%; }
    .tabs { display: flex; margin-bottom: 16px; }
    .tabs button { flex: 1; padding: 10px; border: 1px solid #ccc; background: #eee; cursor: pointer; }
    .tabs button.active { background: #111827; color: white; }
    form { display: none; flex-direction: column; gap: 12px; }
    form.active { display: flex; }
    input { padding: 8px; border: 1px solid #ccc; border-radius: 6px; }
    button[type=submit] { padding: 8px; border: none; border-radius: 6px; background: #111827; color: white; cursor: pointer; }
    .error { color: red; font-size: 14px; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Benvenuto</h1>
    {% if error %}
      <p class="error">{{ error }}</p>
    {% endif %}

    <div class="tabs">
      <button id="login-tab" class="active">Login</button>
      <button id="register-tab">Registrati</button>
    </div>

    <!-- Form Login -->
    <form id="login-form" class="active" method="post" action="/login">
      <input type="email" name="email" placeholder="Email" required />
      <input type="password" name="password" placeholder="Password" required />
      <button type="submit">Accedi</button>
    </form>

    <!-- Form Registrazione -->
    <form id="register-form" method="post" action="/register">
      <input type="email" name="email" placeholder="Email" required />
      <input type="password" name="password" placeholder="Password" required />
      <input type="password" name="password2" placeholder="Ripeti password" required />
      <input type="text" name="nome_ristorante" placeholder="Nome ristorante" required />
      <label>Ruoli richiesti:</label>
      <div style="display:flex; gap:8px; flex-wrap:wrap;">
        <label><input type="checkbox" name="ruoli" value="window_dresser"> Window Dresser</label>
        <label><input type="checkbox" name="ruoli" value="order_manager"> Order Manager</label>
        <label><input type="checkbox" name="ruoli" value="admin"> Admin</label>
      </div>
      <button type="submit">Registrati</button>
    </form>
  </div>

  <script>
    const loginTab = document.getElementById("login-tab");
    const registerTab = document.getElementById("register-tab");
    const loginForm = document.getElementById("login-form");
    const registerForm = document.getElementById("register-form");

    loginTab.addEventListener("click", () => {
      loginTab.classList.add("active");
      registerTab.classList.remove("active");
      loginForm.classList.add("active");
      registerForm.classList.remove("active");
    });

    registerTab.addEventListener("click", () => {
      registerTab.classList.add("active");
      loginTab.classList.remove("active");
      registerForm.classList.add("active");
      loginForm.classList.remove("active");
    });
  </script>
</body>
</html>
